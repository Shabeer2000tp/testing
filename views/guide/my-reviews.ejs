<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="welcome-header h3 mb-0">My Assigned Reviews</h1>
        <p class="text-muted">A list of all reviews where you are a panel member.</p>
    </div>
</div>

<% if (reviews.length > 0) { %>
    <div class="card">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>Review Date</th>
                            <th>Status</th>
                            <th class="text-end">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% reviews.forEach(review => { %>
                            <% const hasSubmitted = review.remarks.some(r => r.reviewer && r.reviewer._id.equals(user.profileId)); %>
                            <tr>
                                <td><strong><%= review.team.name %></strong></td>
                                <td><%= new Date(review.reviewDate).toLocaleDateString() %></td>
                                <td>
                                    <% if (hasSubmitted) { %>
                                        <span class="status-badge status-completed">Submitted</span>
                                    <% } else { %>
                                        <span class="status-badge status-at-risk">Pending</span>
                                    <% } %>
                                </td>
                                <td class="text-end">
                                    <a href="/guide/reviews/<%= review._id %>" class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye me-2"></i> View Details
                                    </a>
                                </td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
<% } else { %>
    <div class="card">
        <div class="card-body text-center p-5">
            <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
            <h5 class="text-muted">No Reviews Assigned</h5>
            <p class="mb-0">You have not been assigned to any review panels yet.</p>
        </div>
    </div>
<% } %>