<div class="welcome-header">
    <h1>Welcome, <%= user.name %>!</h1>
    <p class="text-muted">Here's the status of your assigned teams.</p>
</div>

<% if (teams.length > 0) { %>
    <div class="card-container">
        <% teams.forEach(team => { %>
            <div class="team-card">
                <a href="/guide/teams/<%= team._id %>" class="team-card-link">
                    <div class="team-card-header">
                        <div class="team-info">
                            <h5 class="team-name"><%= team.name %></h5>
                            <p class="project-title"><%= team.projectTitle %></p>
                            <p class="project-domain small text-muted">
                                <i class="fas fa-layer-group me-1"></i>
                                <%= team.domainName || 'No Domain' %>
                            </p>
                        </div>
                    </div>
                    <div class="team-card-body">
                        <% if (team.sprintCapacity > 0) { %>
                            <div class="progress-section">
                                <div class="progress-header">
                                    <span class="progress-title">Active Sprint Progress</span>
                                    <span class="progress-value"><%= team.completedStoryPoints %> / <%= team.sprintCapacity %> SP</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <% const sprintPercentage = (team.completedStoryPoints / team.sprintCapacity) * 100; %>
                                    <div class="progress-bar-inner sprint-progress" style="width: <%= sprintPercentage.toFixed(2) %>%;"></div>
                                </div>
                            </div>
                        <% } else { %>
                            <div class="no-sprint-message">
                                No active sprint for this team.
                            </div>
                        <% } %>

                        <% if (team.overallTotalPoints > 0) { %>
                            <div class="progress-section">
                                <div class="progress-header">
                                    <span class="progress-title">Overall Project Completion</span>
                                    <span class="progress-value"><%= team.overallCompletedPoints %> / <%= team.overallTotalPoints %> SP</span>
                                </div>
                                <div class="progress-bar-wrapper">
                                    <% const overallPercentage = (team.overallCompletedPoints / team.overallTotalPoints) * 100; %>
                                    <div class="progress-bar-inner overall-progress" style="width: <%= overallPercentage.toFixed(2) %>%;"></div>
                                </div>
                            </div>
                        <% } %>

                        <!-- âœ… Members -->
                        <div class="team-members mt-3">
                            <h6 class="members-title">Members</h6>
                            <div class="member-list">
                                <% if (team.students && team.students.length > 0) { %>
                                    <% team.students.forEach(student => { %>
                                        <span class="member-chip"><%= student.name %></span>
                                    <% }) %>
                                <% } else { %>
                                    <p class="small text-muted">No members assigned</p>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        <% }); %>
    </div>
<% } else { %>
    <div class="card">
        <div class="card-body text-center p-5">
            <p class="text-muted mb-0">You are not assigned to any teams yet.</p>
        </div>
    </div>
<% } %>